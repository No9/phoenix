#!/usr/bin/env node
var nomnom     = require('nomnom');


nomnom.script('phoenix')
	.nocolors()
	.option('config', {
		help: 'Sets the config-file (default ./.phoenixrc)'
	});
nomnom.command('setup')
	.help('Creates a new profile and feed.')
	.option('force-new-keypair', {
		flag: true,
		help: 'Overwrites your secret.name file with a new keypair if it already exists.'
	})
	.callback(require('./cli_tool/core').setup);
nomnom.command('serve')
  .help('Starts the web server.')
  .options({
    pub: {
      flag: true,
      abbr: 'p',
    	help: 'Run the pub server in addition to the home server (advanced feature).'
    },
    daemon: {
      flag: true,
      abbr: 'd',
      help: 'Run the server in the background as a daemon.'
    },
    homeport: {
      help: 'Sets the port for the home server.'
    },
    pubport: {
    	help: 'Sets the port for the pub server.'
    },
    dontopen: {
      flag: true,
      abbr: 'n',
      help: 'Don\'t open the page in the browser once the server starts.'
    }
  })
  .callback(require('./cli_tool/http-server').start);
nomnom.command('stop')
  .help('Stops the web-server daemon if it\'s active.')
  .callback(require('./cli_tool/http-server').stop);
nomnom.parse();